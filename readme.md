# Twitch бот для игры Heroes of Storm.

Функционал:
* Выводит информацию о лобби во время загрузки матча (батлтеги, уровни аккаунтов, состоят ли в группе)
* Выводит выбранные таланты прямо во время матча (при  доступе к загрузке изображений по FTP)
* Расширенная послематчевая статистика
* Послематчевый список талантов
* Результаты сыгранных матчей за день

Сохранённые изображения публикуются на Imgur или на FTP.

Для запуска необходимо:
* Установить [Python3](https://www.python.org/downloads/)

* Установить зависимости (вводить в командную строку)
```bash
py -m pip install configobj imgurpython Pillow mpyq twitchio
```

* Установить heroprotocol

Установить heroprotocol можно из [официального репозитория Blizzard](https://github.com/Blizzard/heroprotocol), но в этом случае, потребуется устанавливать устаревшую (начиная с python 3.12) библиотеку `imp.py`. Получить устаревшую библиотеку можно где-то в интернете, либо скачав `python < 3.12` и скопировав оттуда файл `python\Lib\imp.py` в такую же директорию актуального питона.

Если Вы не хотите устанавливать отдельно устаревшую библиотеку, то можно скачать heroprotocol из моего форка с правками под актуальную версию питона:
```bash
py -m pip install -U git+https://github.com/MrMalina/httshots
```

* Скачать [архив с ботом](https://github.com/MrMalina/httshots/archive/refs/heads/master.zip)

* Разархивировать архив с ботом в директорию, где установлен python. Например: d:\python\

* Заполнить конфигурационный файл

Конфигурационный файл находится в `./httshots/config/config.ini`

* Запустить бота
Если директорию с файлами бота располагается в той же директории, где python, то запуск осуществляется командой:
```bash
py
import httshots
```

Для запуска бота с параметрами:
```bash
py -m httshots ПАРАМЕТРЫ
```

Список параметров:
* IGNORE_PREV_MATCHES - при запуске бота НЕ учитывать ранее сыгранные сегодня матчи. Имеет приоритет выше, чем параметр add_previous_games в конфигурационном файле
* SEND_BATTLE_LOBBY - при запуске бота выводить информацию о лобби, если её можно получить. Имеет приоритет выше, чем параметр send_previous_battle_lobby в конфигурационном файле
* RU_REPLAY - язык реплея русский. Имеет приоритет выше, чем параметр replay_language в конфигурационном файле
* EN_REPLAY - язык реплея английский. Имеет приоритет выше, чем параметр replay_language в конфигурационном файле

Внимание, при использовании Imgur актуальные таланты не будут публиковаться!

# Подключение FTP
Для отображения талантов прямо из матча, создайте в директории `config::site_name/config::ftp_folder/` директорию `curname`.
Итого должно получиться, например: `/httshots.ru/mln/curgame.`
Перенесите в эту директорию файл `index.html` из директории `httshots/files/`
Файл `index.html` сгенерирован через генеративную сеть искусственного интеллекта.